<!DOCTYPE html><html lang="ru"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Pixel Art Palette Pro ‚Äî Hue Shifting –¥–ª—è —Å–∫–∏–Ω–æ–≤</title>    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>    <style>        .pixel-preview { image-rendering: pixelated; image-rendering: crisp-edges; }        .drop-zone.dragover { border-color: #a855f7; background: rgba(168,85,247,0.1); }        .style-btn.active { ring: 3px; ring-color: #a855f7; transform: scale(1.02); box-shadow: 0 0 20px rgba(168,85,247,0.4); }        .glow { box-shadow: 0 0 60px rgba(168,85,247,0.3); }        @keyframes pulse { 0%,100%{opacity:0.6} 50%{opacity:1} }        .analyzing { animation: pulse 1.5s infinite; }        .gradient-animate { background-size: 200% 200%; animation: gradient 3s ease infinite; }        @keyframes gradient { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }        ::-webkit-scrollbar { width: 8px; height: 8px; }        ::-webkit-scrollbar-track { background: #1f2937; border-radius: 4px; }        ::-webkit-scrollbar-thumb { background: #6b7280; border-radius: 4px; }        ::-webkit-scrollbar-thumb:hover { background: #9ca3af; }        .color-swatch { width: 24px; height: 24px; border-radius: 4px; border: 2px solid rgba(255,255,255,0.2); }    </style></head><body class="min-h-screen bg-gradient-to-br from-slate-950 via-purple-950/30 to-slate-950 text-white">    <div class="container mx-auto px-4 py-8 max-w-6xl">        <!-- Header -->        <div class="text-center mb-10">            <div class="inline-flex items-center gap-3 mb-3">                <div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center gradient-animate">                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/>                    </svg>                </div>                <h1 class="text-4xl md:text-5xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400 bg-clip-text text-transparent">                    Palette Pro                </h1>            </div>            <p class="text-gray-400 text-lg">Hue Shifting –∫–∞–∫ —É –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–∏–∫—Å–µ–ª—å-–∞—Ä—Ç–µ—Ä–æ–≤</p>            <p class="text-gray-500 text-sm mt-1">–¢–µ–Ω–∏ —É—Ö–æ–¥—è—Ç –≤ —Ö–æ–ª–æ–¥–Ω—ã–µ —Ç–æ–Ω–∞, —Å–≤–µ—Ç–∞ ‚Äî –≤ —Ç—ë–ø–ª—ã–µ. –ë–µ–∑ —Å–º–µ—â–µ–Ω–∏—è –ø–∏–∫—Å–µ–ª–µ–π.</p>        </div>        <!-- Upload Zone -->        <div id="dropZone" class="drop-zone border-2 border-dashed border-gray-600 rounded-3xl p-10 text-center cursor-pointer hover:border-purple-500 transition-all duration-300 bg-gray-900/30 backdrop-blur mb-8 max-w-2xl mx-auto">            <div class="space-y-4">                <div class="w-20 h-20 mx-auto bg-gradient-to-br from-purple-600/30 to-pink-600/30 rounded-2xl flex items-center justify-center">                    <svg class="w-10 h-10 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>                    </svg>                </div>                <div>                    <p class="text-xl font-semibold text-gray-200">–ó–∞–≥—Ä—É–∑–∏ —Å–≤–æ–π —Å–∫–∏–Ω</p>                    <p class="text-gray-500">PNG 64√ó64 ‚Äî –ø–µ—Ä–µ—Ç–∞—â–∏ –∏–ª–∏ –∫–ª–∏–∫–Ω–∏</p>                </div>            </div>            <input type="file" id="fileInput" accept="image/png" class="hidden">        </div>        <!-- Main Content -->        <div id="mainContent" class="hidden space-y-8">            <!-- AI Analysis -->            <div id="aiAnalysis" class="bg-gradient-to-r from-purple-900/40 via-pink-900/40 to-purple-900/40 border border-purple-500/30 rounded-2xl p-6">                <div class="flex items-start gap-4">                    <div class="w-12 h-12 rounded-xl bg-purple-600/30 flex items-center justify-center flex-shrink-0">                        <svg id="aiIcon" class="w-6 h-6 text-purple-400 analyzing" fill="none" stroke="currentColor" viewBox="0 0 24 24">                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>                        </svg>                    </div>                    <div class="flex-1">                        <h3 class="text-lg font-semibold text-purple-300 mb-1">–ê–Ω–∞–ª–∏–∑ –ø–∞–ª–∏—Ç—Ä—ã</h3>                        <p id="aiStatus" class="text-gray-300">–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ü–≤–µ—Ç–∞ —Å–∫–∏–Ω–∞...</p>                        <div id="palettePreview" class="mt-3 flex flex-wrap gap-2 hidden"></div>                    </div>                </div>            </div>            <!-- Preview Section -->            <div class="grid md:grid-cols-2 gap-6">                <div class="bg-gray-900/50 backdrop-blur rounded-2xl p-6 text-center">                    <h3 class="text-gray-400 mb-4 font-medium">–û—Ä–∏–≥–∏–Ω–∞–ª</h3>                    <div class="bg-gray-950/50 rounded-xl p-4 inline-block">                        <canvas id="originalCanvas" width="64" height="64" class="pixel-preview w-48 h-48 md:w-56 md:h-56"></canvas>                    </div>                    <p id="originalColors" class="text-sm text-gray-500 mt-2">–¶–≤–µ—Ç–æ–≤: ‚Äî</p>                </div>                                <div class="bg-gray-900/50 backdrop-blur rounded-2xl p-6 text-center glow">                    <h3 class="text-purple-400 mb-4 font-medium">–° Hue Shifting</h3>                    <div class="bg-gray-950/50 rounded-xl p-4 inline-block">                        <canvas id="resultCanvas" width="64" height="64" class="pixel-preview w-48 h-48 md:w-56 md:h-56"></canvas>                    </div>                    <p id="resultColors" class="text-sm text-purple-400 mt-2">–¶–≤–µ—Ç–æ–≤: ‚Äî</p>                </div>            </div>            <!-- Main Control -->            <div class="bg-gray-900/50 backdrop-blur rounded-2xl p-6">                <div class="flex items-center justify-between mb-4">                    <h3 class="text-xl font-semibold">–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∞</h3>                    <span id="intensityValue" class="text-2xl font-bold text-purple-400">50%</span>                </div>                <input type="range" id="intensity" min="0" max="100" value="50"                     class="w-full h-3 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-purple-500">                <div class="flex justify-between text-sm text-gray-500 mt-2">                    <span>–û—Ä–∏–≥–∏–Ω–∞–ª</span>                    <span>–ú–∞–∫—Å–∏–º—É–º</span>                </div>            </div>            <!-- Hue Shift Direction Presets -->            <div class="bg-gray-900/50 backdrop-blur rounded-2xl p-6">                <h3 class="text-xl font-semibold mb-4">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Hue Shift</h3>                <div class="grid grid-cols-2 md:grid-cols-4 gap-3">                    <button onclick="setPreset('classic')" id="preset-classic" class="style-btn active flex flex-col items-center gap-2 p-4 bg-gradient-to-br from-blue-900/50 to-orange-900/50 border border-blue-700/30 rounded-xl transition-all hover:scale-105">                        <div class="flex gap-1">                            <div class="w-4 h-4 rounded bg-blue-500"></div>                            <div class="w-4 h-4 rounded bg-orange-400"></div>                        </div>                        <span class="font-medium">–ö–ª–∞—Å—Å–∏–∫–∞</span>                        <span class="text-xs text-gray-400">–¢–µ–Ω–∏‚Üí—Å–∏–Ω–∏–π, –°–≤–µ—Ç–∞‚Üí–æ—Ä–∞–Ω–∂</span>                    </button>                    <button onclick="setPreset('warm')" id="preset-warm" class="style-btn flex flex-col items-center gap-2 p-4 bg-gradient-to-br from-purple-900/50 to-yellow-900/50 border border-purple-700/30 rounded-xl transition-all hover:scale-105">                        <div class="flex gap-1">                            <div class="w-4 h-4 rounded bg-purple-500"></div>                            <div class="w-4 h-4 rounded bg-yellow-400"></div>                        </div>                        <span class="font-medium">–¢—ë–ø–ª—ã–π</span>                        <span class="text-xs text-gray-400">–¢–µ–Ω–∏‚Üí—Ñ–∏–æ–ª–µ—Ç, –°–≤–µ—Ç–∞‚Üí–∂—ë–ª—Ç—ã–π</span>                    </button>                    <button onclick="setPreset('cool')" id="preset-cool" class="style-btn flex flex-col items-center gap-2 p-4 bg-gradient-to-br from-teal-900/50 to-pink-900/50 border border-teal-700/30 rounded-xl transition-all hover:scale-105">                        <div class="flex gap-1">                            <div class="w-4 h-4 rounded bg-teal-500"></div>                            <div class="w-4 h-4 rounded bg-pink-400"></div>                        </div>                        <span class="font-medium">–•–æ–ª–æ–¥–Ω—ã–π</span>                        <span class="text-xs text-gray-400">–¢–µ–Ω–∏‚Üí–±–∏—Ä—é–∑–∞, –°–≤–µ—Ç–∞‚Üí—Ä–æ–∑–æ–≤—ã–π</span>                    </button>                    <button onclick="setPreset('sunset')" id="preset-sunset" class="style-btn flex flex-col items-center gap-2 p-4 bg-gradient-to-br from-indigo-900/50 to-red-900/50 border border-indigo-700/30 rounded-xl transition-all hover:scale-105">                        <div class="flex gap-1">                            <div class="w-4 h-4 rounded bg-indigo-500"></div>                            <div class="w-4 h-4 rounded bg-red-400"></div>                        </div>                        <span class="font-medium">–ó–∞–∫–∞—Ç</span>                        <span class="text-xs text-gray-400">–¢–µ–Ω–∏‚Üí–∏–Ω–¥–∏–≥–æ, –°–≤–µ—Ç–∞‚Üí–∫—Ä–∞—Å–Ω—ã–π</span>                    </button>                    <button onclick="setPreset('forest')" id="preset-forest" class="style-btn flex flex-col items-center gap-2 p-4 bg-gradient-to-br from-blue-900/50 to-green-900/50 border border-blue-700/30 rounded-xl transition-all hover:scale-105">                        <div class="flex gap-1">                            <div class="w-4 h-4 rounded bg-blue-600"></div>                            <div class="w-4 h-4 rounded bg-green-400"></div>                        </div>                        <span class="font-medium">–õ–µ—Å</span>                        <span class="text-xs text-gray-400">–¢–µ–Ω–∏‚Üí—Å–∏–Ω–∏–π, –°–≤–µ—Ç–∞‚Üí–∑–µ–ª—ë–Ω—ã–π</span>                    </button>                    <button onclick="setPreset('candy')" id="preset-candy" class="style-btn flex flex-col items-center gap-2 p-4 bg-gradient-to-br from-fuchsia-900/50 to-cyan-900/50 border border-fuchsia-700/30 rounded-xl transition-all hover:scale-105">                        <div class="flex gap-1">                            <div class="w-4 h-4 rounded bg-fuchsia-500"></div>                            <div class="w-4 h-4 rounded bg-cyan-400"></div>                        </div>                        <span class="font-medium">–ö–æ–Ω—Ñ–µ—Ç–∫–∞</span>                        <span class="text-xs text-gray-400">–¢–µ–Ω–∏‚Üí–º–∞–¥–∂–µ–Ω—Ç–∞, –°–≤–µ—Ç–∞‚Üí–≥–æ–ª—É–±–æ–π</span>                    </button>                    <button onclick="setPreset('mono')" id="preset-mono" class="style-btn flex flex-col items-center gap-2 p-4 bg-gradient-to-br from-slate-900/50 to-slate-700/50 border border-slate-600/30 rounded-xl transition-all hover:scale-105">                        <div class="flex gap-1">                            <div class="w-4 h-4 rounded bg-slate-600"></div>                            <div class="w-4 h-4 rounded bg-slate-300"></div>                        </div>                        <span class="font-medium">–ú–æ–Ω–æ</span>                        <span class="text-xs text-gray-400">–¢–æ–ª—å–∫–æ –∫–æ–Ω—Ç—Ä–∞—Å—Ç</span>                    </button>                    <button onclick="setPreset('neon')" id="preset-neon" class="style-btn flex flex-col items-center gap-2 p-4 bg-gradient-to-br from-violet-900/50 to-lime-900/50 border border-violet-700/30 rounded-xl transition-all hover:scale-105">                        <div class="flex gap-1">                            <div class="w-4 h-4 rounded bg-violet-500"></div>                            <div class="w-4 h-4 rounded bg-lime-400"></div>                        </div>                        <span class="font-medium">–ù–µ–æ–Ω</span>                        <span class="text-xs text-gray-400">–¢–µ–Ω–∏‚Üí—Ñ–∏–æ–ª–µ—Ç, –°–≤–µ—Ç–∞‚Üí–ª–∞–π–º</span>                    </button>                </div>            </div>            <!-- Fine Tuning -->            <details class="bg-gray-900/50 backdrop-blur rounded-2xl">                <summary class="p-6 cursor-pointer font-semibold text-lg flex items-center justify-between">                    <span>üéõÔ∏è –¢–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</span>                    <svg class="w-5 h-5 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>                    </svg>                </summary>                <div class="px-6 pb-6 space-y-6">                    <!-- Hue Shift Settings -->                    <div class="grid md:grid-cols-2 gap-6">                        <div class="space-y-4">                            <h4 class="font-medium text-purple-300">–°–¥–≤–∏–≥ –æ—Ç—Ç–µ–Ω–∫–∞</h4>                                                        <div class="space-y-2">                                <div class="flex justify-between">                                    <label class="text-sm text-gray-400">–°–¥–≤–∏–≥ –≤ —Ç–µ–Ω—è—Ö</label>                                    <span id="shadowHueVal" class="text-sm text-blue-400">-30¬∞</span>                                </div>                                <input type="range" id="shadowHue" min="-60" max="60" value="-30" class="w-full accent-blue-500">                                <p class="text-xs text-gray-500">–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ = —Ö–æ–ª–æ–¥–Ω–µ–µ, –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ = —Ç–µ–ø–ª–µ–µ</p>                            </div>                                                        <div class="space-y-2">                                <div class="flex justify-between">                                    <label class="text-sm text-gray-400">–°–¥–≤–∏–≥ –≤ —Å–≤–µ—Ç–∞—Ö</label>                                    <span id="highlightHueVal" class="text-sm text-orange-400">+25¬∞</span>                                </div>                                <input type="range" id="highlightHue" min="-60" max="60" value="25" class="w-full accent-orange-500">                            </div>                            <div class="space-y-2">                                <div class="flex justify-between">                                    <label class="text-sm text-gray-400">–°–¥–≤–∏–≥ –≤ —Å—Ä–µ–¥–Ω–∏—Ö —Ç–æ–Ω–∞—Ö</label>                                    <span id="midHueVal" class="text-sm text-gray-400">0¬∞</span>                                </div>                                <input type="range" id="midHue" min="-30" max="30" value="0" class="w-full accent-gray-500">                            </div>                        </div>                        <div class="space-y-4">                            <h4 class="font-medium text-pink-300">–ù–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–∞—Å—Ç</h4>                                                        <div class="space-y-2">                                <div class="flex justify-between">                                    <label class="text-sm text-gray-400">–ù–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å —Ç–µ–Ω–µ–π</label>                                    <span id="shadowSatVal" class="text-sm text-purple-400">+10%</span>                                </div>                                <input type="range" id="shadowSat" min="-30" max="50" value="10" class="w-full accent-purple-500">                            </div>                                                        <div class="space-y-2">                                <div class="flex justify-between">                                    <label class="text-sm text-gray-400">–ù–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å —Å–≤–µ—Ç–æ–≤</label>                                    <span id="highlightSatVal" class="text-sm text-yellow-400">-5%</span>                                </div>                                <input type="range" id="highlightSat" min="-30" max="50" value="-5" class="w-full accent-yellow-500">                            </div>                            <div class="space-y-2">                                <div class="flex justify-between">                                    <label class="text-sm text-gray-400">–ú—è–≥–∫–æ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–∞</label>                                    <span id="softnessVal" class="text-sm text-green-400">50%</span>                                </div>                                <input type="range" id="softness" min="0" max="100" value="50" class="w-full accent-green-500">                                <p class="text-xs text-gray-500">–ù–∞—Å–∫–æ–ª—å–∫–æ –ø–ª–∞–≤–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç</p>                            </div>                        </div>                    </div>                    <!-- Additional Effects -->                    <div class="border-t border-gray-700 pt-4">                        <h4 class="font-medium text-gray-300 mb-4">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ</h4>                        <div class="grid md:grid-cols-3 gap-4">                            <div class="space-y-2">                                <div class="flex justify-between">                                    <label class="text-sm text-gray-400">–ö–æ–Ω—Ç—Ä–∞—Å—Ç</label>                                    <span id="contrastVal" class="text-sm text-purple-400">0%</span>                                </div>                                <input type="range" id="contrast" min="-30" max="30" value="0" class="w-full accent-purple-500">                            </div>                                                        <div class="space-y-2">                                <div class="flex justify-between">                                    <label class="text-sm text-gray-400">–Ø—Ä–∫–æ—Å—Ç—å</label>                                    <span id="brightnessVal" class="text-sm text-yellow-400">0%</span>                                </div>                                <input type="range" id="brightness" min="-30" max="30" value="0" class="w-full accent-yellow-500">                            </div>                            <div class="space-y-2">                                <div class="flex justify-between">                                    <label class="text-sm text-gray-400">–û–±—â–∞—è –Ω–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å</label>                                    <span id="saturationVal" class="text-sm text-pink-400">0%</span>                                </div>                                <input type="range" id="saturation" min="-30" max="30" value="0" class="w-full accent-pink-500">                            </div>                        </div>                    </div>                </div>            </details>            <!-- Actions -->            <div class="flex flex-col sm:flex-row gap-4">                <button onclick="resetAll()" class="flex-1 py-4 bg-gray-800 hover:bg-gray-700 rounded-xl font-semibold transition-all flex items-center justify-center gap-2">                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>                    </svg>                    –°–±—Ä–æ—Å–∏—Ç—å                </button>                <button onclick="downloadSkin()" class="flex-1 py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 glow">                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>                    </svg>                    –°–∫–∞—á–∞—Ç—å —Å–∫–∏–Ω                </button>            </div>            <!-- Large Preview -->            <div class="bg-gray-900/50 backdrop-blur rounded-2xl p-6">                <h3 class="text-lg font-semibold mb-4 text-gray-300 text-center">–£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä (8√ó)</h3>                <div class="flex justify-center gap-4 overflow-x-auto pb-4">                    <div class="text-center flex-shrink-0">                        <p class="text-sm text-gray-500 mb-2">–û—Ä–∏–≥–∏–Ω–∞–ª</p>                        <div class="bg-gray-950/50 rounded-xl p-4 inline-block">                            <canvas id="largeOriginal" width="512" height="512" class="pixel-preview" style="width: 256px; height: 256px;"></canvas>                        </div>                    </div>                    <div class="text-center flex-shrink-0">                        <p class="text-sm text-purple-400 mb-2">–†–µ–∑—É–ª—å—Ç–∞—Ç</p>                        <div class="bg-gray-950/50 rounded-xl p-4 inline-block">                            <canvas id="largeResult" width="512" height="512" class="pixel-preview" style="width: 256px; height: 256px;"></canvas>                        </div>                    </div>                </div>            </div>            <!-- Info -->            <div class="bg-gray-900/30 rounded-2xl p-6 text-center">                <h4 class="font-semibold text-purple-300 mb-2">üí° –ß—Ç–æ —Ç–∞–∫–æ–µ Hue Shifting?</h4>                <p class="text-gray-400 text-sm max-w-2xl mx-auto">                    –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∏–∫—Å–µ–ª—å-–∞—Ä—Ç–µ—Ä—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–æ—Å—Ç–æ —Ç—ë–º–Ω—ã–µ/—Å–≤–µ—Ç–ª—ã–µ –≤–µ—Ä—Å–∏–∏ —Ü–≤–µ—Ç–∞.                     –û–Ω–∏ —Å–¥–≤–∏–≥–∞—é—Ç <strong class="text-blue-400">–æ—Ç—Ç–µ–Ω–æ–∫ (hue)</strong> ‚Äî —Ç–µ–Ω–∏ —É—Ö–æ–¥—è—Ç –≤ —Ö–æ–ª–æ–¥–Ω—ã–µ —Ç–æ–Ω–∞ (—Å–∏–Ω–∏–π, —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π),                     –∞ —Å–≤–µ—Ç–∞ –≤ —Ç—ë–ø–ª—ã–µ (–∂—ë–ª—Ç—ã–π, –æ—Ä–∞–Ω–∂–µ–≤—ã–π). –≠—Ç–æ —Å–æ–∑–¥–∞—ë—Ç –∂–∏–≤—É—é, –±–æ–≥–∞—Ç—É—é –ø–∞–ª–∏—Ç—Ä—É –±–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ü–≤–µ—Ç–æ–≤.                </p>            </div>        </div>    </div>    <script>        // State        let originalImage = null;        let skinWidth = 64, skinHeight = 64;        let currentPreset = 'classic';        // Presets - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–¥–≤–∏–≥–∞ hue        const presets = {            classic:  { shadowHue: -30, highlightHue: 25, midHue: 0, shadowSat: 10, highlightSat: -5 },            warm:     { shadowHue: -45, highlightHue: 35, midHue: 5, shadowSat: 15, highlightSat: 0 },            cool:     { shadowHue: -20, highlightHue: -10, midHue: -5, shadowSat: 5, highlightSat: 10 },            sunset:   { shadowHue: -50, highlightHue: 40, midHue: 10, shadowSat: 20, highlightSat: 5 },            forest:   { shadowHue: -25, highlightHue: 60, midHue: 15, shadowSat: 10, highlightSat: -10 },            candy:    { shadowHue: 40, highlightHue: -40, midHue: 0, shadowSat: 25, highlightSat: 15 },            mono:     { shadowHue: 0, highlightHue: 0, midHue: 0, shadowSat: -20, highlightSat: -20 },            neon:     { shadowHue: -35, highlightHue: 50, midHue: 0, shadowSat: 30, highlightSat: 20 }        };        // DOM        const dropZone = document.getElementById('dropZone');        const fileInput = document.getElementById('fileInput');        const originalCanvas = document.getElementById('originalCanvas');        const resultCanvas = document.getElementById('resultCanvas');        const largeOriginal = document.getElementById('largeOriginal');        const largeResult = document.getElementById('largeResult');        // Events        dropZone.addEventListener('click', () => fileInput.click());        dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.classList.add('dragover'); });        dropZone.addEventListener('dragleave', () => dropZone.classList.remove('dragover'));        dropZone.addEventListener('drop', e => {            e.preventDefault();            dropZone.classList.remove('dragover');            if (e.dataTransfer.files[0]) loadImage(e.dataTransfer.files[0]);        });        fileInput.addEventListener('change', e => {            if (e.target.files[0]) loadImage(e.target.files[0]);        });        // Sliders        ['intensity', 'shadowHue', 'highlightHue', 'midHue', 'shadowSat', 'highlightSat',          'softness', 'contrast', 'brightness', 'saturation'].forEach(id => {            document.getElementById(id).addEventListener('input', updatePreview);        });        function loadImage(file) {            if (!file.type.includes('png')) {                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ PNG —Ñ–∞–π–ª!');                return;            }            const reader = new FileReader();            reader.onload = e => {                const img = new Image();                img.onload = () => {                    if (img.width !== 64 || (img.height !== 64 && img.height !== 32)) {                        alert('–°–∫–∏–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 64√ó64 –∏–ª–∏ 64√ó32 –ø–∏–∫—Å–µ–ª–µ–π!');                        return;                    }                    skinWidth = img.width;                    skinHeight = img.height;                    originalImage = img;                    // Setup canvases                    [originalCanvas, resultCanvas].forEach(c => {                        c.width = skinWidth;                        c.height = skinHeight;                    });                    [largeOriginal, largeResult].forEach(c => {                        c.width = skinWidth * 8;                        c.height = skinHeight * 8;                    });                    const ctx = originalCanvas.getContext('2d');                    ctx.clearRect(0, 0, skinWidth, skinHeight);                    ctx.drawImage(img, 0, 0);                    // Draw large original                    const loCtx = largeOriginal.getContext('2d');                    loCtx.imageSmoothingEnabled = false;                    loCtx.drawImage(img, 0, 0, largeOriginal.width, largeOriginal.height);                    document.getElementById('mainContent').classList.remove('hidden');                                        analyzePalette();                    updatePreview();                };                img.src = e.target.result;            };            reader.readAsDataURL(file);        }        function analyzePalette() {            const aiStatus = document.getElementById('aiStatus');            const aiIcon = document.getElementById('aiIcon');            const palettePreview = document.getElementById('palettePreview');                        aiIcon.classList.add('analyzing');                        const ctx = originalCanvas.getContext('2d');            const imageData = ctx.getImageData(0, 0, skinWidth, skinHeight);            const data = imageData.data;            // Collect unique colors            const colors = new Map();            for (let i = 0; i < data.length; i += 4) {                if (data[i + 3] < 128) continue;                const key = `${data[i]},${data[i+1]},${data[i+2]}`;                colors.set(key, (colors.get(key) || 0) + 1);            }            // Sort by frequency            const sorted = [...colors.entries()].sort((a, b) => b[1] - a[1]).slice(0, 12);                        document.getElementById('originalColors').textContent = `–¶–≤–µ—Ç–æ–≤: ${colors.size}`;            // Analyze characteristics            let avgBrightness = 0, avgSaturation = 0, count = 0;            for (const [key] of sorted) {                const [r, g, b] = key.split(',').map(Number);                const hsl = rgbToHsl(r, g, b);                avgBrightness += hsl.l;                avgSaturation += hsl.s;                count++;            }            avgBrightness /= count;            avgSaturation /= count;            setTimeout(() => {                aiIcon.classList.remove('analyzing');                                let recommendation = '';                if (avgBrightness < 0.4) {                    recommendation = 'üåô –¢—ë–º–Ω—ã–π —Å–∫–∏–Ω ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø—Ä–µ—Å–µ—Ç <strong class="text-purple-300">–¢—ë–ø–ª—ã–π</strong> –∏–ª–∏ <strong class="text-purple-300">–ù–µ–æ–Ω</strong>';                } else if (avgBrightness > 0.6) {                    recommendation = '‚òÄÔ∏è –°–≤–µ—Ç–ª—ã–π —Å–∫–∏–Ω ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø—Ä–µ—Å–µ—Ç <strong class="text-purple-300">–•–æ–ª–æ–¥–Ω—ã–π</strong> –∏–ª–∏ <strong class="text-purple-300">–ö–ª–∞—Å—Å–∏–∫–∞</strong>';                } else if (avgSaturation < 0.3) {                    recommendation = 'üé® –ü—Ä–∏–≥–ª—É—à—ë–Ω–Ω—ã–µ —Ü–≤–µ—Ç–∞ ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø—Ä–µ—Å–µ—Ç <strong class="text-purple-300">–ó–∞–∫–∞—Ç</strong> –¥–ª—è –æ–∂–∏–≤–ª–µ–Ω–∏—è';                } else {                    recommendation = '‚ú® –û—Ç–ª–∏—á–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞! –ü–æ–ø—Ä–æ–±—É–π <strong class="text-purple-300">–ö–ª–∞—Å—Å–∏–∫—É</strong> –∏–ª–∏ <strong class="text-purple-300">–õ–µ—Å</strong>';                }                                aiStatus.innerHTML = recommendation;                // Show palette                palettePreview.innerHTML = sorted.map(([key]) => {                    const [r, g, b] = key.split(',');                    return `<div class="color-swatch" style="background: rgb(${r},${g},${b})" title="RGB(${r},${g},${b})"></div>`;                }).join('');                palettePreview.classList.remove('hidden');            }, 500);        }        function setPreset(name) {            currentPreset = name;            const p = presets[name];                        document.getElementById('shadowHue').value = p.shadowHue;            document.getElementById('highlightHue').value = p.highlightHue;            document.getElementById('midHue').value = p.midHue;            document.getElementById('shadowSat').value = p.shadowSat;            document.getElementById('highlightSat').value = p.highlightSat;            document.querySelectorAll('.style-btn').forEach(btn => btn.classList.remove('active'));            document.getElementById(`preset-${name}`).classList.add('active');            updatePreview();        }        function updatePreview() {            if (!originalImage) return;            // Update value displays            const intensity = parseInt(document.getElementById('intensity').value);            document.getElementById('intensityValue').textContent = intensity + '%';                        const shadowHue = parseInt(document.getElementById('shadowHue').value);            const highlightHue = parseInt(document.getElementById('highlightHue').value);            const midHue = parseInt(document.getElementById('midHue').value);            const shadowSat = parseInt(document.getElementById('shadowSat').value);            const highlightSat = parseInt(document.getElementById('highlightSat').value);            const softness = parseInt(document.getElementById('softness').value);            const contrast = parseInt(document.getElementById('contrast').value);            const brightness = parseInt(document.getElementById('brightness').value);            const saturation = parseInt(document.getElementById('saturation').value);            document.getElementById('shadowHueVal').textContent = (shadowHue >= 0 ? '+' : '') + shadowHue + '¬∞';            document.getElementById('highlightHueVal').textContent = (highlightHue >= 0 ? '+' : '') + highlightHue + '¬∞';            document.getElementById('midHueVal').textContent = (midHue >= 0 ? '+' : '') + midHue + '¬∞';            document.getElementById('shadowSatVal').textContent = (shadowSat >= 0 ? '+' : '') + shadowSat + '%';            document.getElementById('highlightSatVal').textContent = (highlightSat >= 0 ? '+' : '') + highlightSat + '%';            document.getElementById('softnessVal').textContent = softness + '%';            document.getElementById('contrastVal').textContent = (contrast >= 0 ? '+' : '') + contrast + '%';            document.getElementById('brightnessVal').textContent = (brightness >= 0 ? '+' : '') + brightness + '%';            document.getElementById('saturationVal').textContent = (saturation >= 0 ? '+' : '') + saturation + '%';            // Get original data            const tempCanvas = document.createElement('canvas');            tempCanvas.width = skinWidth;            tempCanvas.height = skinHeight;            const tempCtx = tempCanvas.getContext('2d');            tempCtx.drawImage(originalImage, 0, 0);            const imageData = tempCtx.getImageData(0, 0, skinWidth, skinHeight);            const data = imageData.data;            // Apply Hue Shifting            const result = applyHueShifting(data, {                intensity: intensity / 100,                shadowHue,                highlightHue,                midHue,                shadowSat: shadowSat / 100,                highlightSat: highlightSat / 100,                softness: softness / 100,                contrast: contrast / 100,                brightness: brightness / 100,                saturation: saturation / 100            });            // Count result colors            const resultColors = new Set();            for (let i = 0; i < result.length; i += 4) {                if (result[i + 3] >= 128) {                    resultColors.add(`${result[i]},${result[i+1]},${result[i+2]}`);                }            }            document.getElementById('resultColors').textContent = `–¶–≤–µ—Ç–æ–≤: ${resultColors.size}`;            // Draw result            const resultData = new ImageData(result, skinWidth, skinHeight);            const resultCtx = resultCanvas.getContext('2d');            resultCtx.putImageData(resultData, 0, 0);            // Large preview            const lrCtx = largeResult.getContext('2d');            lrCtx.imageSmoothingEnabled = false;            lrCtx.clearRect(0, 0, largeResult.width, largeResult.height);            lrCtx.drawImage(resultCanvas, 0, 0, largeResult.width, largeResult.height);        }        function applyHueShifting(data, settings) {            const result = new Uint8ClampedArray(data);            const { intensity, shadowHue, highlightHue, midHue, shadowSat, highlightSat, softness, contrast, brightness, saturation } = settings;            for (let i = 0; i < data.length; i += 4) {                if (data[i + 3] < 128) continue;                let r = data[i], g = data[i + 1], b = data[i + 2];                // Convert to HSL                let hsl = rgbToHsl(r, g, b);                                // Calculate luminance position (0 = shadow, 0.5 = mid, 1 = highlight)                const lum = hsl.l;                                // Smooth transition curves                const smoothness = 0.5 + softness * 0.5;                                // Shadow influence (peaks at lum=0, fades to 0 at lum=0.5)                const shadowInfluence = Math.pow(Math.max(0, 1 - lum * 2), smoothness);                                // Highlight influence (peaks at lum=1, fades to 0 at lum=0.5)                  const highlightInfluence = Math.pow(Math.max(0, (lum - 0.5) * 2), smoothness);                                // Mid influence (peaks at lum=0.5)                const midInfluence = 1 - Math.abs(lum - 0.5) * 2;                // Apply hue shift based on luminance                let hueShift = 0;                hueShift += shadowHue * shadowInfluence;                hueShift += highlightHue * highlightInfluence;                hueShift += midHue * midInfluence * 0.5;                                // Apply with intensity                hsl.h += (hueShift / 360) * intensity;                                // Keep hue in 0-1 range                hsl.h = ((hsl.h % 1) + 1) % 1;                // Apply saturation adjustments                let satShift = 0;                satShift += shadowSat * shadowInfluence;                satShift += highlightSat * highlightInfluence;                hsl.s = Math.max(0, Math.min(1, hsl.s + satShift * intensity));                // Global saturation                hsl.s = Math.max(0, Math.min(1, hsl.s * (1 + saturation)));                // Convert back to RGB                const rgb = hslToRgb(hsl.h, hsl.s, hsl.l);                r = rgb.r;                g = rgb.g;                b = rgb.b;                // Apply brightness                if (brightness !== 0) {                    const bAdj = brightness * 255;                    r = Math.max(0, Math.min(255, r + bAdj));                    g = Math.max(0, Math.min(255, g + bAdj));                    b = Math.max(0, Math.min(255, b + bAdj));                }                // Apply contrast                if (contrast !== 0) {                    const factor = (1 + contrast) / (1 - contrast * 0.5);                    r = Math.max(0, Math.min(255, factor * (r - 128) + 128));                    g = Math.max(0, Math.min(255, factor * (g - 128) + 128));                    b = Math.max(0, Math.min(255, factor * (b - 128) + 128));                }                result[i] = Math.round(r);                result[i + 1] = Math.round(g);                result[i + 2] = Math.round(b);            }            return result;        }        // Color conversion utilities        function rgbToHsl(r, g, b) {            r /= 255; g /= 255; b /= 255;            const max = Math.max(r, g, b), min = Math.min(r, g, b);            let h, s, l = (max + min) / 2;            if (max === min) {                h = s = 0;            } else {                const d = max - min;                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);                switch (max) {                    case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;                    case g: h = ((b - r) / d + 2) / 6; break;                    case b: h = ((r - g) / d + 4) / 6; break;                }            }            return { h, s, l };        }        function hslToRgb(h, s, l) {            let r, g, b;            if (s === 0) {                r = g = b = l;            } else {                const hue2rgb = (p, q, t) => {                    if (t < 0) t += 1;                    if (t > 1) t -= 1;                    if (t < 1/6) return p + (q - p) * 6 * t;                    if (t < 1/2) return q;                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;                    return p;                };                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;                const p = 2 * l - q;                r = hue2rgb(p, q, h + 1/3);                g = hue2rgb(p, q, h);                b = hue2rgb(p, q, h - 1/3);            }            return { r: r * 255, g: g * 255, b: b * 255 };        }        function resetAll() {            document.getElementById('intensity').value = 50;            document.getElementById('softness').value = 50;            document.getElementById('contrast').value = 0;            document.getElementById('brightness').value = 0;            document.getElementById('saturation').value = 0;            setPreset('classic');        }        function downloadSkin() {            if (!originalImage) return;            const link = document.createElement('a');            link.download = `skin_hueshift_${currentPreset}.png`;            link.href = resultCanvas.toDataURL('image/png');            link.click();        }        // Init        function initCanvas(canvas, text) {            const ctx = canvas.getContext('2d');            ctx.fillStyle = '#1a1625';            ctx.fillRect(0, 0, canvas.width, canvas.height);            if (text) {                ctx.fillStyle = '#6b7280';                ctx.font = `${Math.max(10, canvas.width / 25)}px sans-serif`;                ctx.textAlign = 'center';                ctx.fillText(text, canvas.width / 2, canvas.height / 2);            }        }        initCanvas(originalCanvas, '');        initCanvas(resultCanvas, '');        initCanvas(largeOriginal, '–û—Ä–∏–≥–∏–Ω–∞–ª');        initCanvas(largeResult, '–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∫–∏–Ω');    </script></body></html>
